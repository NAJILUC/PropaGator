
%       Boat Geometry       %
% %%%%%%%%%%%%%%%%%%%%%%%%% %

% %%%%%%%%%%%%%%%%%%%%%%%%%-----
% %                       %   A
% %                       %   |
% %                       %   |
% %                       %   |
% %                       %   |
% %           O           %  69"
% %           %           %   |
% %   O       %<-12"->O---%   |
% %           %       A   %   |
% %           %     6"|   %   |
% %           %       V   %   V
% %%%%%%%%%%%%%%%%%%%%%%%%%-----
% |<---------34"--------->|
% |                       |


function [out] = BoatController
syms theta1 theta2 f1 f2

intom = 0.0254;                     %m/in
lbtokg = 0.453592;                  %lb/kg

rx1 = -12*intom;                    %m
rx2 =  12*intom;                    %m
ry1 = -69*intom/2 + 6*intom;        %m
ry2 = ry1;                          %m

M = 80*lbtokg;                      %kg
I = 1/12*M*((2*rx1)^2 + (2*ry1)^2); %m^2/kg



alpha1 = 1;
alpha2 = 1;
alpha3 = 1;
alpha4 = 1;
alpha5 = 1;
alpha6 = 1;
alpha7 = 1;

Fx(theta1, theta2, f1, f2) = f1*sin(theta1) + f2*sin(theta2);
Fy(theta1, theta2, f1, f2) = f1*cos(theta1) + f2*cos(theta2);
M(theta1, theta2, f1, f2) = rx1*f1*cos(theta1) - ry1*f2*cos(theta1)...
    + rx2*f2*cos(theta2) - ry1*f2*cos(theta2);

V = alpha1/2*Fx^2 +...
    alpha2/2*Fy^2 +...
    alpha3/2*M^2  +...
    alpha4/2*f1^2 +...
    alpha5/2*f2^2;

dVdf1 = f1 + sin(theta1)*(f1*sin(theta1) + f2*sin(theta2)) ...
    - (381*cos(theta1)*((7239*f2*cos(theta1))/10000 ...
    - (381*f1*cos(theta1))/1250 ...
    + (10287*f2*cos(theta2))/10000))/1250 ...
    + cos(theta1)*(f1*cos(theta1) + f2*cos(theta2));

ddVddf1 = (1707661*cos(theta1)^2)/1562500 + sin(theta1)^2 + 1;


dVdf2 = f2 + sin(theta2)*(f1*sin(theta1) + f2*sin(theta2)) ...
    + ((7239*cos(theta1))/10000 ...
    + (10287*cos(theta2))/10000)*((7239*f2*cos(theta1))/10000 ...
    - (381*f1*cos(theta1))/1250 + (10287*f2*cos(theta2))/10000) ...
    + cos(theta2)*(f1*cos(theta1) + f2*cos(theta2))

ddVddf2 = ((7239*cos(theta1))/10000 + (10287*cos(theta2))/10000)^2 ...
    + cos(theta2)^2 + sin(theta2)^2 + 1;
 

dVdtheta1 = ((381*f1*sin(theta1))/1250 ...
    - (7239*f2*sin(theta1))/10000)*((7239*f2*cos(theta1))/10000 ...
    - (381*f1*cos(theta1))/1250 + (10287*f2*cos(theta2))/10000) ...
    - f1*sin(theta1)*(f1*cos(theta1) + f2*cos(theta2)) ...
    + f1*cos(theta1)*(f1*sin(theta1) + f2*sin(theta2));

ddVddtheta1 = ((381*f1*sin(theta1))/1250 ...
    - (7239*f2*sin(theta1))/10000)^2 + ((381*f1*cos(theta1))/1250 ...
    - (7239*f2*cos(theta1))/10000)*((7239*f2*cos(theta1))/10000 ...
    - (381*f1*cos(theta1))/1250 + (10287*f2*cos(theta2))/10000) ...
    + f1^2*cos(theta1)^2 + f1^2*sin(theta1)^2 ...
    - f1*cos(theta1)*(f1*cos(theta1) + f2*cos(theta2)) ...
    - f1*sin(theta1)*(f1*sin(theta1) + f2*sin(theta2));


dVdtheta2 = f2*cos(theta2)*(f1*sin(theta1) ...
    + f2*sin(theta2)) - f2*sin(theta2)*(f1*cos(theta1) ...
    + f2*cos(theta2)) - ...
    (10287*f2*sin(theta2)*((7239*f2*cos(theta1))/10000 ...
    - (381*f1*cos(theta1))/1250 + ...
    (10287*f2*cos(theta2))/10000))/10000;

ddVddtheta2 = f2^2*cos(theta2)^2 ...
    + (205822369*f2^2*sin(theta2)^2)/100000000 ...
    - f2*cos(theta2)*(f1*cos(theta1) + f2*cos(theta2)) ...
    - f2*sin(theta2)*(f1*sin(theta1) + f2*sin(theta2)) ...
    - (10287*f2*cos(theta2)*((7239*f2*cos(theta1))/10000 ...
    - (381*f1*cos(theta1))/1250 ...
    + (10287*f2*cos(theta2))/10000))/10000;


end

function [
